<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>CoreHooks.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">pircbotx</a> &gt; <a href="index.source.html" class="el_package">org.pircbotx.hooks</a> &gt; <span class="el_source">CoreHooks.java</span></div><h1>CoreHooks.java</h1><pre class="source lang-java linenums">// Generated by delombok at Sun Jan 24 05:08:02 EST 2016
/**
 * Copyright (C) 2010-2014 Leon Blakey &lt;lord.quackstar at gmail.com&gt;
 *
 * This file is part of PircBotX.
 *
 * PircBotX is free software: you can redistribute it and/or modify it under the
 * terms of the GNU General Public License as published by the Free Software
 * Foundation, either version 3 of the License, or (at your option) any later
 * version.
 *
 * PircBotX is distributed in the hope that it will be useful, but WITHOUT ANY
 * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
 * A PARTICULAR PURPOSE. See the GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with
 * PircBotX. If not, see &lt;http://www.gnu.org/licenses/&gt;.
 */
package org.pircbotx.hooks;

import java.util.Date;
import java.util.Map;
import org.apache.commons.lang3.StringUtils;
import org.pircbotx.Configuration;
import org.pircbotx.UserHostmask;
import org.pircbotx.Utils;
import org.pircbotx.hooks.events.FingerEvent;
import org.pircbotx.hooks.events.PingEvent;
import org.pircbotx.hooks.events.ServerPingEvent;
import org.pircbotx.hooks.events.TimeEvent;
import org.pircbotx.hooks.events.VersionEvent;
import org.pircbotx.hooks.managers.ListenerManager;
import org.pircbotx.hooks.types.GenericMessageEvent;

/**
 * Several standard IRC client default responses. Any listener that wishes to
 * duplicate functionality should &lt;b&gt;replace&lt;/b&gt;
 * CoreHooks in the {@link ListenerManager} with a subclass of this class (this
 * way you don't have to duplicate all the functionality).
 * &lt;p&gt;
 * &lt;b&gt;Warning:&lt;/b&gt; Removing CoreHooks without providing a replacement will
 * produce undesired results like server timeouts due to not responding to
 * pings.
 * &lt;p/&gt;
 * @see
 * org.pircbotx.Configuration.Builder#replaceCoreHooksListener(org.pircbotx.hooks.CoreHooks)
 * @author Leon Blakey
 */
<span class="fc" id="L49">public class CoreHooks extends ListenerAdapter {</span>
	@java.lang.SuppressWarnings(&quot;all&quot;)
	@javax.annotation.Generated(&quot;lombok&quot;)
<span class="fc" id="L52">	private static final org.slf4j.Logger log = org.slf4j.LoggerFactory.getLogger(CoreHooks.class);</span>


	@Override
	public void onFinger(FingerEvent event) {
<span class="fc" id="L57">		event.getUser().send().ctcpResponse(&quot;FINGER &quot; + event.getBot().getConfiguration().getFinger());</span>
<span class="fc" id="L58">	}</span>

	@Override
	public void onPing(PingEvent event) {
<span class="fc" id="L62">		event.getUser().send().ctcpResponse(&quot;PING &quot; + event.getPingValue());</span>
<span class="fc" id="L63">	}</span>

	@Override
	public void onServerPing(ServerPingEvent event) {
<span class="fc" id="L67">		event.getBot().sendRaw().rawLine(&quot;PONG &quot; + event.getResponse());</span>
<span class="fc" id="L68">	}</span>

	@Override
	public void onTime(TimeEvent event) {
<span class="fc" id="L72">		event.getUser().send().ctcpResponse(&quot;TIME &quot; + new Date().toString());</span>
<span class="fc" id="L73">	}</span>

	@Override
	public void onVersion(VersionEvent event) {
<span class="fc" id="L77">		event.getUser().send().ctcpResponse(&quot;VERSION &quot; + event.getBot().getConfiguration().getVersion());</span>
<span class="fc" id="L78">	}</span>

	@Override
	public void onGenericMessage(GenericMessageEvent event) throws Exception {
<span class="fc" id="L82">		Configuration config = event.getBot().getConfiguration();</span>
<span class="fc" id="L83">		UserHostmask hostmask = event.getUserHostmask();</span>
		//There must be a passwork and on success text
		//The hostmask must contain &quot;nickserv&quot;
		//The message must contain the on success text
<span class="pc bpc" id="L87" title="1 of 6 branches missed.">		if (config.getNickservOnSuccess() != null &amp;&amp; StringUtils.containsIgnoreCase(hostmask.getHostmask(), config.getNickservNick()) &amp;&amp; StringUtils.containsIgnoreCase(event.getMessage(), config.getNickservOnSuccess())) {</span>
<span class="fc" id="L88">			log.info(&quot;Successfully identified to nickserv&quot;);</span>
<span class="fc" id="L89">			Utils.setNickServIdentified(event.getBot());</span>
<span class="pc bpc" id="L90" title="1 of 2 branches missed.">			if (config.isNickservDelayJoin()) {</span>
<span class="nc bnc" id="L91" title="All 2 branches missed.">				for (Map.Entry&lt;String, String&gt; channelEntry : config.getAutoJoinChannels().entrySet()) event.getBot().sendIRC().joinChannel(channelEntry.getKey(), channelEntry.getValue());</span>
			}
		}
<span class="fc" id="L94">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>