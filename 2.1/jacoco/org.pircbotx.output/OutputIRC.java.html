<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>OutputIRC.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">pircbotx</a> &gt; <a href="index.source.html" class="el_package">org.pircbotx.output</a> &gt; <span class="el_source">OutputIRC.java</span></div><h1>OutputIRC.java</h1><pre class="source lang-java linenums">// Generated by delombok at Sun Jan 24 05:08:02 EST 2016
/**
 * Copyright (C) 2010-2014 Leon Blakey &lt;lord.quackstar at gmail.com&gt;
 *
 * This file is part of PircBotX.
 *
 * PircBotX is free software: you can redistribute it and/or modify it under the
 * terms of the GNU General Public License as published by the Free Software
 * Foundation, either version 3 of the License, or (at your option) any later
 * version.
 *
 * PircBotX is distributed in the hope that it will be useful, but WITHOUT ANY
 * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
 * A PARTICULAR PURPOSE. See the GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with
 * PircBotX. If not, see &lt;http://www.gnu.org/licenses/&gt;.
 */
package org.pircbotx.output;

import org.pircbotx.Colors;
import org.pircbotx.PircBotX;
import org.pircbotx.hooks.CoreHooks;
import org.pircbotx.hooks.events.ChannelInfoEvent;
import org.pircbotx.hooks.events.DisconnectEvent;
import static com.google.common.base.Preconditions.*;
import lombok.NonNull;
import org.apache.commons.lang3.StringUtils;

/**
 * Implements the basic IRC protocol.
 *
 * @author Leon Blakey
 */
public class OutputIRC {
	@NonNull
	protected final PircBotX bot;

	/**
	 * Joins a channel.
	 *
	 * @param channel The name of the channel to join (eg &quot;#cs&quot;).
	 */
	public void joinChannel(String channel) {
<span class="nc" id="L45">		checkArgument(StringUtils.isNotBlank(channel), &quot;Channel \'%s\' is blank&quot;, channel);</span>
<span class="nc" id="L46">		bot.sendRaw().rawLine(&quot;JOIN &quot; + channel);</span>
<span class="nc" id="L47">	}</span>

	/**
	 * Joins a channel with a key.
	 *
	 * @param channel The name of the channel to join (eg &quot;#cs&quot;).
	 * @param key The key that will be used to join the channel.
	 */
	public void joinChannel(String channel, String key) {
<span class="nc" id="L56">		checkArgument(StringUtils.isNotBlank(channel), &quot;Channel \'%s\' is blank&quot;, channel);</span>
<span class="nc" id="L57">		checkNotNull(key, &quot;Key for channel %s cannot be null&quot;, channel);</span>
<span class="nc" id="L58">		joinChannel(channel + &quot; &quot; + key);</span>
<span class="nc" id="L59">	}</span>

	/**
	 * Quits from the IRC server. Providing we are actually connected to an IRC
	 * server, a {@link DisconnectEvent} will be dispatched as soon as the IRC
	 * server disconnects us.
	 */
	public void quitServer() {
<span class="fc" id="L67">		quitServer(&quot;&quot;);</span>
<span class="fc" id="L68">	}</span>

	/**
	 * Quits from the IRC server with a reason. Providing we are actually
	 * connected to an IRC server, a {@link DisconnectEvent} will be dispatched
	 * as soon as the IRC server disconnects us.
	 *
	 * @param reason The reason for quitting the server.
	 */
	public void quitServer(String reason) {
<span class="fc" id="L78">		checkNotNull(reason, &quot;Reason cannot be null&quot;);</span>
<span class="fc" id="L79">		bot.sendRaw().rawLineNow(&quot;QUIT :&quot; + reason);</span>
<span class="fc" id="L80">	}</span>

	/**
	 * Sends a CTCP command to a channel or user. (Client to client protocol).
	 * Examples of such commands are &quot;PING &lt;number&gt;&quot;, &quot;FINGER&quot;, &quot;VERSION&quot;, etc.
	 * For example, if you wish to request the version of a user called &quot;Dave&quot;,
	 * then you would call &lt;code&gt;sendCTCPCommand(&quot;Dave&quot;, &quot;VERSION&quot;);&lt;/code&gt;. The
	 * type of response to such commands is largely dependant on the target
	 * client software.
	 *
	 * @since PircBot 0.9.5
	 *
	 * @param target The name of the channel or user to send the CTCP message
	 * to.
	 * @param command The CTCP command to send.
	 */
	public void ctcpCommand(String target, String command) {
<span class="fc" id="L97">		checkArgument(StringUtils.isNotBlank(target), &quot;Target \'%s\' is blank&quot;, target, command);</span>
<span class="fc" id="L98">		checkArgument(StringUtils.isNotBlank(command), &quot;CTCP command \'%s\' is blank&quot;, command, target);</span>
<span class="fc" id="L99">		bot.sendRaw().rawLineSplit(&quot;PRIVMSG &quot; + target + &quot; :\001&quot;, command, &quot;\001&quot;);</span>
<span class="fc" id="L100">	}</span>

	/**
	 * Send a CTCP response to the target channel or user. Note that the
	 * {@link CoreHooks} class already handles responding to the most common
	 * CTCP commands. Only respond to other commands that aren't implemented
	 *
	 * @param target The target of the response
	 * @param message The message to send
	 */
	public void ctcpResponse(String target, String message) {
<span class="fc" id="L111">		checkArgument(StringUtils.isNotBlank(target), &quot;Target \'%s\' is blank&quot;, target);</span>
<span class="fc" id="L112">		bot.sendRaw().rawLine(&quot;NOTICE &quot; + target + &quot; :\001&quot; + message + &quot;\001&quot;);</span>
<span class="fc" id="L113">	}</span>

	/**
	 * Sends a message to a channel or a private message to a user. These
	 * messages are added to the outgoing message queue and sent at the earliest
	 * possible opportunity.
	 * &lt;p&gt;
	 * Some examples: -
	 * &lt;pre&gt;    // Send the message &quot;Hello!&quot; to the channel #cs.
	 * sendMessage(&quot;#cs&quot;, &quot;Hello!&quot;);
	 *
	 * // Send a private message to Paul that says &quot;Hi&quot;.
	 * sendMessage(&quot;Paul&quot;, &quot;Hi&quot;);&lt;/pre&gt;
	 *
	 * You may optionally apply colours, boldness, underlining, etc to the
	 * message by using the &lt;code&gt;Colors&lt;/code&gt; class.
	 *
	 * @param target The name of the channel or user nick to send to.
	 * @param message The message to send.
	 *
	 * @see Colors
	 */
	public void message(String target, String message) {
<span class="fc" id="L136">		checkArgument(StringUtils.isNotBlank(target), &quot;Target \'%s\' is blank&quot;, target);</span>
<span class="fc" id="L137">		bot.sendRaw().rawLineSplit(&quot;PRIVMSG &quot; + target + &quot; :&quot;, message);</span>
<span class="fc" id="L138">	}</span>

	/**
	 * Sends an action to the channel or to a user.
	 *
	 * @param target The name of the channel or user nick to send to.
	 * @param action The action to send.
	 *
	 * @see Colors
	 */
	public void action(String target, String action) {
<span class="fc" id="L149">		checkArgument(StringUtils.isNotBlank(target), &quot;Target \'%s\' is blank&quot;, target);</span>
<span class="fc" id="L150">		ctcpCommand(target, &quot;ACTION &quot; + action);</span>
<span class="fc" id="L151">	}</span>

	/**
	 * Sends a notice to the channel or to a user.
	 *
	 * @param target The name of the channel or user nick to send to.
	 * @param notice The notice to send.
	 */
	public void notice(String target, String notice) {
<span class="fc" id="L160">		checkArgument(StringUtils.isNotBlank(target), &quot;Target \'%s\' is blank&quot;, target);</span>
<span class="fc" id="L161">		bot.sendRaw().rawLineSplit(&quot;NOTICE &quot; + target + &quot; :&quot;, notice);</span>
<span class="fc" id="L162">	}</span>

	/**
	 * Attempt to change the current nick (nickname) of the bot when it is
	 * connected to an IRC server. After confirmation of a successful nick
	 * change, the getNick method will return the new nick.
	 *
	 * @param newNick The new nick to use.
	 */
	public void changeNick(String newNick) {
<span class="fc" id="L172">		checkArgument(StringUtils.isNotBlank(newNick), &quot;Nick \'%s\' is blank&quot;, newNick);</span>
<span class="fc" id="L173">		bot.sendRaw().rawLine(&quot;NICK &quot; + newNick);</span>
<span class="fc" id="L174">	}</span>

	/**
	 * Sends an invitation to join a channel. Some channels can be marked as
	 * &quot;invite-only&quot;, so it may be useful to allow a bot to invite people into
	 * it.
	 *
	 * @param target The nick or channel to invite
	 * @param channel The channel you are inviting them to join.
	 */
	public void invite(String target, String channel) {
<span class="fc" id="L185">		checkArgument(StringUtils.isNotBlank(target), &quot;Nick \'%s\' is blank&quot;, target);</span>
<span class="fc" id="L186">		checkArgument(StringUtils.isNotBlank(channel), &quot;Channel \'%s\' is blank&quot;, channel);</span>
<span class="fc" id="L187">		bot.sendRaw().rawLine(&quot;INVITE &quot; + target + &quot; :&quot; + channel);</span>
<span class="fc" id="L188">	}</span>

	/**
	 * Issues a request for a list of all channels on the IRC server. When the
	 * PircBotX receives information for each channel, a
	 * {@link ChannelInfoEvent} will be dispatched which you will need to listen
	 * for if you want to do anything useful.
	 * &lt;p&gt;
	 * &lt;b&gt;NOTE:&lt;/b&gt; This will do nothing if a channel list is already in effect
	 *
	 * @see ChannelInfoEvent
	 */
	public void listChannels() {
<span class="nc" id="L201">		listChannels(&quot;&quot;);</span>
<span class="nc" id="L202">	}</span>

	/**
	 * Issues a request for a list of all channels on the IRC server. When the
	 * PircBotX receives information for each channel, a
	 * {@link ChannelInfoEvent} will be dispatched which you will need to listen
	 * for if you want to do anything useful
	 * &lt;p&gt;
	 * Some IRC servers support certain parameters for LIST requests. One
	 * example is a parameter of &quot;&gt;10&quot; to list only those channels that have
	 * more than 10 users in them. Whether these parameters are supported or not
	 * will depend on the IRC server software.
	 * &lt;p&gt;
	 * &lt;b&gt;NOTE:&lt;/b&gt; This will do nothing if a channel list is already in effect
	 *
	 * @param parameters The parameters to supply when requesting the list.
	 *
	 * @see ChannelInfoEvent
	 */
	public void listChannels(String parameters) {
<span class="nc" id="L222">		checkNotNull(parameters, &quot;Parameters cannot be null&quot;);</span>
<span class="nc bnc" id="L223" title="All 2 branches missed.">		if (!bot.getInputParser().isChannelListRunning()) bot.sendRaw().rawLine(&quot;LIST &quot; + parameters);</span>
<span class="nc" id="L224">	}</span>

	/**
	 * Identify the bot with NickServ, supplying the appropriate password. Some
	 * IRC Networks (such as freenode) require users to &lt;i&gt;register&lt;/i&gt; and
	 * &lt;i&gt;identify&lt;/i&gt; with NickServ before they are able to send private
	 * messages to other users, thus reducing the amount of spam. If you are
	 * using an IRC network where this kind of policy is enforced, you will need
	 * to make your bot &lt;i&gt;identify&lt;/i&gt; itself to NickServ before you can send
	 * private messages. Assuming you have already registered your bot's nick
	 * with NickServ, this method can be used to &lt;i&gt;identify&lt;/i&gt; with the
	 * supplied password. It usually makes sense to identify with NickServ
	 * immediately after connecting to a server.
	 * &lt;p&gt;
	 * This method issues a raw NICKSERV command to the server, and is therefore
	 * safer than the alternative approach of sending a private message to
	 * NickServ. The latter approach is considered dangerous, as it may cause
	 * you to inadvertently transmit your password to an untrusted party if you
	 * connect to a network which does not run a NickServ service and where the
	 * untrusted party has assumed the nick &quot;NickServ&quot;. However, if your IRC
	 * network is only compatible with the private message approach, you may
	 * typically identify like so:
	 * &lt;pre&gt;sendMessage(&quot;NickServ&quot;, &quot;identify PASSWORD&quot;);&lt;/pre&gt;
	 * &lt;p&gt;
	 * Note that this method will add a temporary listener for ConnectEvent if
	 * the bot is not logged in yet. If the bot is logged in the command is sent
	 * immediately to the server
	 *
	 * @param password The password which will be used to identify with
	 * NickServ.
	 */
	public void identify(final String password) {
<span class="nc" id="L256">		checkArgument(StringUtils.isNotBlank(password), &quot;Password \'%s\' is blank&quot;, password);</span>
<span class="nc" id="L257">		bot.sendRaw().rawLine(&quot;NICKSERV IDENTIFY &quot; + password);</span>
<span class="nc" id="L258">	}</span>

	public void mode(String target, String mode) {
<span class="nc" id="L261">		bot.sendRaw().rawLine(&quot;MODE &quot; + target + &quot; &quot; + mode);</span>
<span class="nc" id="L262">	}</span>

	/**
	 * Send &quot;WHOIS target&quot;
	 *
	 * @param target
	 */
	public void whois(String target) {
<span class="nc" id="L270">		bot.sendRaw().rawLine(&quot;WHOIS &quot; + target);</span>
<span class="nc" id="L271">	}</span>

	/**
	 * Send &quot;WHOIS target target&quot; for more detail
	 *
	 * @param target
	 */
	public void whoisDetail(String target) {
<span class="nc" id="L279">		bot.sendRaw().rawLine(&quot;WHOIS &quot; + target + &quot; &quot; + target);</span>
<span class="nc" id="L280">	}</span>

	@java.beans.ConstructorProperties({&quot;bot&quot;})
	@java.lang.SuppressWarnings(&quot;all&quot;)
	@javax.annotation.Generated(&quot;lombok&quot;)
<span class="fc" id="L285">	public OutputIRC(@NonNull final PircBotX bot) {</span>
<span class="pc bpc" id="L286" title="1 of 2 branches missed.">		if (bot == null) {</span>
<span class="nc" id="L287">			throw new java.lang.NullPointerException(&quot;bot&quot;);</span>
		}
<span class="fc" id="L289">		this.bot = bot;</span>
<span class="fc" id="L290">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>